<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>wat</title>
  <style>
    html,
    body {
      background-color: #000;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #app {
      box-shadow: 0 0 1px #000;
    }
  </style>
  <script>
    // ZzFX - Zuper Zmall Zound Zynth v1.3.1 by Frank Force | https://github.com/KilledByAPixel/ZzFX
    zzfx = (...t) => zzfxP(zzfxG(...t))
    zzfxP = (...t) => { let e = zzfxX.createBufferSource(), f = zzfxX.createBuffer(t.length, t[0].length, zzfxR); t.map((d, i) => f.getChannelData(i).set(d)), e.buffer = f, e.connect(zzfxX.destination), e.start(); return e }
    zzfxG = (q = 1, k = .05, c = 220, e = 0, t = 0, u = .1, r = 0, F = 1, v = 0, z = 0, w = 0, A = 0, l = 0, B = 0, x = 0, G = 0, d = 0, y = 1, m = 0, C = 0) => { let b = 2 * Math.PI, H = v *= 500 * b / zzfxR ** 2, I = (0 < x ? 1 : -1) * b / 4, D = c *= (1 + 2 * k * Math.random() - k) * b / zzfxR, Z = [], g = 0, E = 0, a = 0, n = 1, J = 0, K = 0, f = 0, p, h; e = 99 + zzfxR * e; m *= zzfxR; t *= zzfxR; u *= zzfxR; d *= zzfxR; z *= 500 * b / zzfxR ** 3; x *= b / zzfxR; w *= b / zzfxR; A *= zzfxR; l = zzfxR * l | 0; for (h = e + m + t + u + d | 0; a < h; Z[a++] = f)++K % (100 * G | 0) || (f = r ? 1 < r ? 2 < r ? 3 < r ? Math.sin((g % b) ** 3) : Math.max(Math.min(Math.tan(g), 1), -1) : 1 - (2 * g / b % 2 + 2) % 2 : 1 - 4 * Math.abs(Math.round(g / b) - g / b) : Math.sin(g), f = (l ? 1 - C + C * Math.sin(2 * Math.PI * a / l) : 1) * (0 < f ? 1 : -1) * Math.abs(f) ** F * q * zzfxV * (a < e ? a / e : a < e + m ? 1 - (a - e) / m * (1 - y) : a < e + m + t ? y : a < h - d ? (h - a - d) / u * y : 0), f = d ? f / 2 + (d > a ? 0 : (a < h - d ? 1 : (h - a) / d) * Z[a - d | 0] / 2) : f), p = (c += v += z) * Math.sin(E * x - I), g += p - p * B * (1 - 1E9 * (Math.sin(a) + 1) % 2), E += p - p * B * (1 - 1E9 * (Math.sin(a) ** 2 + 1) % 2), n && ++n > A && (c += w, D += w, n = 0), !l || ++J % l || (c = D, v = H, n = n || 1); return Z }
    zzfxV = .3
    zzfxR = 44100
    zzfxX = new (window.AudioContext || webkitAudioContext);
    //! ZzFXM (v2.0.3) | (C) Keith Clark | MIT | https://github.com/keithclark/ZzFXM
    zzfxM = (n, f, t, e = 125) => { let l, o, z, r, g, h, x, a, u, c, d, i, m, p, G, M = 0, R = [], b = [], j = [], k = 0, q = 0, s = 1, v = {}, w = zzfxR / e * 60 >> 2; for (; s; k++)R = [s = a = d = m = 0], t.map((e, d) => { for (x = f[e][k] || [0, 0, 0], s |= !!f[e][k], G = m + (f[e][0].length - 2 - !a) * w, p = d == t.length - 1, o = 2, r = m; o < x.length + p; a = ++o) { for (g = x[o], u = o == x.length + p - 1 && p || c != (x[0] || 0) | g | 0, z = 0; z < w && a; z++ > w - 99 && u ? i += (i < 1) / 99 : 0)h = (1 - i) * R[M++] / 2 || 0, b[r] = (b[r] || 0) - h * q + h, j[r] = (j[r++] || 0) + h * q + h; g && (i = g % 1, q = x[1] || 0, (g |= 0) && (R = v[[c = x[M = 0] || 0, g]] = v[[c, g]] || (l = [...n[c]], l[2] *= 2 ** ((g - 12) / 12), g > 0 ? zzfxG(...l) : []))) } m = G }); return [b, j] }

    const buffer = zzfxM(...[[[.25,0,,,,,3,0,,,320,,,4],[.25,0,137,.02,.2,.55,2,.41,,,.1],[.25,0,84,,,,,.7,,,,.5,,6.7,1,.05],[.25,0,209,,.02,.25,3],[.25,0,800,,,.075,2,2,,,1e3,-.01,.02,4.8,-.3,,.065],[.25,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],[.25,0,52,,,.2,2,,,,.5,.01],[.25,0,22,,.07,.07,2,0,,,.5,.01]],[[[2,-1,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,20,,20,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,20,,,20,20,20,20],[1,1,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,9,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[3,-1,13,13,16,8,16,13,20,16,8,4,8,16,13,20,25,13,13,13,16,8,16,13,20,16,8,4,8,16,13,20,25,13,9,9,16,9,4,9,21,16,21,25,23,21,28,25,23,21,9,9,21,16,4,21,13,16,21,4,9,9,33,28,25,21],[4,1,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,,,24,,],[4,-1,,,,34,,,,34,,,,34,,,,34,,,,30,,,,34,,,,34,,,15,,,,,34,,,,34,,,,34,,,,34,,,,34,,,,34,,,15,20,,,,,],[,1,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,22,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,22]],[[2,-1,20,,,,,,,,20,,,,,,,,20,,,,,,,,20,,,,,,,,20,,,,,,,,20,,,,,,,,20,,,,,,,,20,,,,,,,,],[1,1,20,,,,,,,,,,,,,,,,,,,,,,,,,,,,13,,,,21,,,,,,,,,,,,,,,,,,,,,,,,25,,,,,,,,],[6,1,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,13,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,9,,],[4,-1,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24,,24,24,24],[5,-1,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,,,,,,22,,,,]]],[0,0,1,1],,{"instruments":["claps1","analogstring","bassdrum2","nice","hihat2","popsnare2","monobass","smash1"],"patterns":["Pattern 0","Pattern 1"]}]);
    const node = window.zzfxP(...buffer);
    node.loop = true;
  </script>
</head>

<body>
  <canvas width="768" height="576" id="app"></canvas>
  <script type="module" src="./src/main.ts"></script>
</body>

</html>